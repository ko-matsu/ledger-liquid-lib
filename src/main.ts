import {Ledger} from './ledger'
import { app, BrowserWindow, ipcMain } from 'electron';
import cfdjs from 'cfd-js'

const path = require('path');
const url = require('url');

const fixTxHex2 = '020000000103916c2e9812a1ce5ac298101dc2f6f792d10c1c0241138cf3ac1752a4445d70310200000000ffffffff04ea8b94f2e4d66231d45bb1768bad4eca05102dc7c16361878ceada070987950300000000ffffffff49cbd2a4a710e8cd105cdd62f8d731345bf2f398e089310c4dd7960245ea3f9f0600000000ffffffff070b26330513ec66fe24b4d94928e20afa7d6819acedab7bd617ffb7e82f48c7d19808f8e2352cf1a65460727dab7b0871a09e5ec50c41d7484025ccf68ec574ef77cc0217a71c9e15dec47b1db23042917bbc689b420f9922f1192cdb987f69a296b9ad1600145f3eae0aa9b4fafdde62bfca2badc34cc62cdb160bf4a6065b7df1026c17d3d67ced8eb604e9b9d239be832a6a09b7a885d1d4669309ab6657a2b33df09b1576c205a3738c539cc03db5b58cc08405c9e053b9cea89003265085ec2085cd1abdf509d8d6fb74bc15f5e4b039ce3a9e98b5b195e8a4dde41600146ac320f98a20613490cbd2c335b5d397403dee810b45665e47e9bd8a067914777306a8d013d854e8b28734a0429d72ff229d14b511093bd53d104344cbe45bf68c1641075c7d7ba4acb5a6a1f2d11184af0f58e8b99103c37be7669ffd87603dcc416496242f9c7a1caf14ebc8e119811dc2b869917f1716001497e4c8d9c297e7a4d8aea1a5ed2189f03c1360f10b40a259ea147f4b48854532fe5dfada9dfa2fe7389c71dfc6bfa51f248395451608c3e6a82b9fc4fbc270a779380667d253fe60d8008ad7c33bdf2ec34c608559e802760db2ea84ea4e05b069d640596cd1cd80b4dc5a6cdf593f627761db95fa050b160014672580086b24e5a84b06b529ca6ea3f9ed3100840b9cc04c2599812c1b4c618c9286acfefdf0cb9ba7a4cfff1ce47b1da1513e5512098748103dd8a3d8aa823e1571e9a8d49f3dd4f0c111decd1031a96db509c1487503ccee5b8f20eeecd3c4bf9041c7125a02c5beb310003507f4550b8f643254c00d1976a9149b1e0a9fe4baa31cf5d8501a2f93d1d8438f151688ac0a68fac9bd00bd459e98e6401d5027223631b60971da61ec1f016140f7935f044709ef185ca54a0a563b1db9c23855893a67f1dedff7b3ad6cc44851abb8c2dacd2c0322f73186b94f558234a5c5fe0201489daaad978ebce45c7eb22c989bb3c635dc1976a9149165b3daace9948960a8a0f36870b6dba059f2ad88ac0125b251070e29ca19043cf33ccd7324e2ddab03ecc4ae0b5e77c4fc0e5cf6c95a010000000000001b4700000000000000000000000000000000000083030007f13dfafbfd0e9670caf1872d74959689adf4a31963173df33aef35df657bc89ff0bbd94e133e71a4ab20daa213206e2dc5bbabee05ac996197e94ef9050467cc82008ef3cffc950ee8567055823526372055169a64ab432303d8447a1cc23fa000c3ae8433b890134ec5e16e1d585d9bc67ea003c5ffe0e1451329d715f86a1bfd4d0b60230000000000000001668d015380b68a630d77c55864005ebdfebea457c22019ec20c480846d5f3462adf067807463028ff68addb30480ae6665b5acaffc280e1203ba3121e39cbec6dbdb137a8c788836473ccf8ac12df62d1bf908712e1b89085712b9cab88ff0ea30160243ea961389edaa031021c3467e058ef11a6d0f022b515bdaf05b7a4e6be529f11a9eeeff81e18f1f447284dd624e2b4a135c29835323392b5b9ba6461d0e5a20d6016f27a9906ad369fa374bc410c6f77980c8238575d92a3b9c0d01f9174e0e0cbfb832ed1fccc8f49e39f9ee9d73acc5496609df0f10077a566fb23113874ca0f104cc2f49ab779826a5b806921d347b051605eddeb71fe60ce57f893a5ce3a7c627cf4e9c50006f3fe1057ea37575f9c4d919365d2eb5e5174adc6f917b75fa0aebe8e10bd5c8df7d6d75e4128c016f887bac31945b580266b95c1b3fd0878adadc8f8219e2b6e3d062d73fc844b76099a8c71f169a6d438095e5d0c9c263f2a92c7547a04a37a4b2840793c56f201f2ea2f1492cce0b8a8fd714e17ac3487646ac3ae7b49a11add5b3950e1cafd4cb6defb22e081ebcdb9c41f1ce928100f40e41385d38ff71bd147250e3f9d178fa5f3bac55728c798b6899d680ccf3c419b2c4c3ddeb5ad36dc66609d80a9f253b849acdc517e26276c664de62583d88994dd469f1fd1a09f49db5348dece3780be6405647c2d7ed1e568cc28fcb64ba278bd30d52dc72a779c201a9883c6db3810fb934167c1375833cac793c59775311cce3cca500ab639fc03efbf383e99e4a1bca8f85c5ac4007cc9166b9ac6cea0a7366526d7508d37f06072b0acddfba79e3bc5dc2cf5a11b3dc4fed21c789dd5dbadc27bfe847719ad959367337681b3b38576e2d20a5393fbeab427d5ad57f32d1469d8f8b1297915999d592e2da8b6b12873a2a93645562b9f5fa3fa649114e0af0bdd95b11a2493388845cade7697801392591ec54739c9fd96b9c0f03dccc1438e6ea18745d46aa86ab14e267b7ab611337f15e34bc5478357b7c00a415e12794d65883d8a87f60740ad420a2d4c34c090f58936d1fe4e2b12c353705584c0c56496312210aa23b9f79b5167fb9aeaf55063f602fa84f97642acd742b1f1bbf12ca3a56a7a6af7b21e97c9a8721771a32d75c96d198d1b1d392aa17a338c8fc24650e9abb5a5651c54b3d609a882ebb7c761478d7be2ba46f17b29584c7e3260dcf750f6568e0ac3ed971fcc64f7495f5f9bbace435f70fd206ab18277e717deeb3a9c9452a3f88a677ff576e777bd5ff9fef3af0592eb4ffe4ee3dcfe51ac19e9dfbe3a2b8a65d334af7cb6915c40d8cff5e8134b4a53ac4895b0cbe90992b8c5ab566034edad16158f943d42a1d84e247df04a1899afa73f7870e66e89b8f08e44c8f43415fa4f0b9e7c50f0e5e8f0c36c40e5220ea555a62c43067e977147896699c5eb174cd44b5086c0a0a384ee4be5d88fda27f6850be6166728b77107cc7d6ef620f83abcdf87601ea35131e6a6bf9014b85f9232102aa2eedaf8eedb5c9e1581acf499cb13db22a0185168594e79a4863f68302565b397529637e4911e267a7ae54c3c5841a8ea1fc3dd7e2dc2c7a76418bf5580a3e703b78620651bae0a9746a50c7b2808e227ad9d120e5ffafab0e01d921180a191e48b0e552e89739cca4f7af28e91bd28db59c603e6094ec33d6930e0531e247357f0c79562a2736526a628f3fa4a9257e54451f1218e1ff59f98d7206d318dfc826be6d86815d16e930d6c9d30501847a0384bbbdb9c1fa488af7c323a52166318bb19d3f3142d4f04b954983bb55fc38c877184092478c5574005d4ae3405f2e7aaf1ae41fc41dd6dfd6ef86e273a5ab83c9b47b2fe00eed4188240502e85697c89cc72152f4a32aaacd0fae6aae1f638545703f5bb0d8a07a4e04fd2a53f67255653e53f787439a2007c470b2e948e0de467b913b5f3e2b06de08802ef0fbd520fdb63a871f59d5a1450d3fb9575bd3d1b508abfc3076f570ad3a211ee7426232ac5f8cccb2bf6670a1ccee89a04b3506168aad59dd085d5516e1a7a5b25e84d9304879f528330bafd91302214d92ec160064ea6d9660e949df6bfe59c14679035dc8c45d6b1947144121be35436a579cfa443224c2ee6dacd72379cdb8e4672e1ecf88bdbaff731cdb83a48291c25c33a65251e883a4989c1854de73b48674cee17086e47ae40e723cdfb7e16eddd26e7fa85ee5ab6336cde6964c50971ddc8791f634af2efaf0632dd8b5113ef8c47da4ea278efcb6871d42d6bb3fa43a4b85e61719c7ce824030d1f5fb18e8df35a782d24d25095a735cd0e27d215e12cf44cfcf4fa85556fc00b43d752e7d4aa66ab9b5d7b00074170ef89ebf05f22d54c47e061f9b33fa0674ece333d7a05de1696f7da847c10afa3c1715de7fbd8f3764278420800bd22aad748b611e493129b72d65f50340acf5838611402996ebe70a8c81a9540e01b06f8d980df3cf15f44e8b7c0861d190d76bc1ae4e1ba2d725e10c2c4e7eae4ffa48a72f2b924940f876f6530502acd91d7c5739d9eacdf065365029e659a46a4d7e841779c5ae5fd02dc8f2dd1efae0c521a099cd5e240e229748658293dc8dfe814d62a6872195288f5485e4034cc433cc609f086c96e82ab442a513a99d0fce4e0006682a53419848b42245081ef45242211fb977aee52965cf007a8381afd325e179d9899c0150deeb4661561e8b808eb96343598805eeb4e7c1c75342851c4624c49c345440829be5bd345d4e04eb15786fd9d89a0dd4fcba0ad786eb8df3f4a2d85ccf4ea9b3de39a136df91237bc4c4a868deb9ffbce71a560c3173408a8dfd5ffcd6fac93195f4bf279312ec5b7903e06250d2fcf1dda87b9fa1579cb9e45105c63c29998c438c370fc97c5a9332f4cd158d1f7b3119e737b93859924848c1518692d8f7d3575122275e8ae526be63acde4df92ce621bcf84c09f857045e2fe0ef2116e0d6a1c14da852c854b8c387b80091ed2f8be34f4fbc1aa69983b55ec02906dcbe43578133f6268cec03582cb4b5b72e190c3863da8308ffeef513e464904db12a2b8ab47f7d49e87f553f01a48990fd4338467246f62ad66b99d566f1d39af8ca54de1e40a1220cf8b20e9c1a342fb7bb47e0ca7320fbdc01d0983409b840e0cab671d8b5ba77cd8a99ae2cd5db595261432d1d7cc95af1c47e934c62e696b5e77f1673ac2575a5e6a64c6184e37b8a90b99019696b94c566e2566075df518c67ccf76d2d8d17e3f3d781eb2d9cb84602a32bb587ad7314b094fb5bd04d733c3d8b6351728855442e907819724ed61c976040c25962b5675f023b6e3ac1977d8765effc550c846b85033bab793fe5ae5bceeba72616736246eb8eeb3182d87179f740e53c583c6d329950c694674773141e61c394fb47d6e145acb60589cc73005bb226c610ac6b5de0390e52a42e52530bc2c5a6f1b06081104707104aa56dcbdcbb12984740adf724f403e46b2142cd9827ee4349bf522c14b290d9eb3b8e4a7a0d4d8a299216b63005db57b79531f1336a2747ca1c056312e7fd0d807ed1e299609ac218c8ca6bb9de1b315611d0d48e0ca5b1f1eab3c3ea694fbb1484fbe64b01112f874e357ab2124e5736f7f1b03e9a5d0998cec4663001594c928a2a18457f5c92b0d0a0afc26736d735e46919be409c9f014aa083a5e90ccee5722c1c44c2d17ac9add6af40310f9929ed3c3dc72743e21dad8dfb725427ec1fa2bafa33f423acc86c0bbab1d3f4f8daee3dce0860f6fcec98414e9044ae8fea9df5ad73e53a089e3f14f1aa54363b4ea8dbcc9dbb6f0022fc74c2ddd06fdf4ac5cf7890cdc4c155e574f4c80619ded96ed2544800b4982cc3f97b7ef0f5689df9b59fae14d9604d03b06329b1a9ff414853c72153795f436953f3dd5bdf98808db306cf385b4f0daceba64d150ce7ad01fe11b0e1b933407776b8c4095779ac2e79265132c64aa55eaf0c85d07c287244046cd88fd487285fac5f2f8a1a8d858636dffaec7e1bfffa880bec2521fef409b3468317bb2183030007a9a249fdae91ce7dd8f3747859b7068342014734265ae660c34b7879767c01975503aadd752efa0246dd83489b9f18e6ab4d51a97dd202f54829978fee3777cb368d66e8bf9d815bd626711144c92d9e5fd89a7de16e4f2f48b67fa2a7c92aba8fda774be1f5dfa46737c0cdce79c77a04e163c1a7c36e55c22049422b011cc7fd4d0b6023000000000000000106230036e7bf4875605b19a42e93c4c074eb3a13a21d9ed15520a8c08daad7abbe35fcd819020d34ce18954264778dc59bd24a5819fee9c3171bd50b66111b11dc64af6968b9cfed204269bd26b6dee34a37d25bb11b6f1ce60b9fece4efab822657316b5d5ded7d92daa711a3ceb6422469ed92a5d5be76d55cf433da2d6b60971d22cce7d5a4fbe6f0591c12952183491da90d7278efe6d70d3eb1dc89a6123043765ae7744db99dad6302886f2ff0ebfe0b932344b67a9e58dc2e7fc8e812142499a33e5654fd81824040e0cb7476947966c0e2b6e2eaf3633677570c3c865041e8bff0727fb141d7d811e18b71dbe9ca9266b33314e3988abc0980687bbac6a1a4d5d0f5248b667a95dbef5a4a70b11bbffe72092fd31754eb8fc591b7f33814cfc884d9f558b1e348e7e63eda20f7d1e0cf5b92723c64ed769ace62215761036fbbf337380c084123817eed3d89a393a5db5fba2ccdb8a0f28a35b083dfc8ceb47606745cef1d6496494333995a3e71b65441c9f998ed895d08d11a4ce6af124eabf85c682d2ae949a10474487db38a166203ebdc5c71888bd64b639da2abfb54a3255e250680d0be26c604586abebeb92394dbdf17457abd9f5c18938efa4045f3f158c1a0b97a4bfe799daa9b6bb689832fc07f7d27ae8959c063ff568bee8fbbc90e68cabc647575ef1921d0512207a1d9900b5a5a335675c3a974d8f1f817251c49675bd03d507bf5be93e6b24194db24bbcb5be9b1fc7f9be99065e1a7817538d30d199ccab0642351de444aa954ba2e6bd6cec3c486f68f04915055b7b4bbf4fd96f23a4c7478ea88c461ebf6807001edf89cbf63710435225cb1c4b77dbdc89dc336cdb82a7e6ab5c5ae574acc5757241ac9fc673989427520ee4fa8b898cea71ff22248c6924354b4ff4327b612701a48ced4c330fdd95c35be47d6c809fb36dca0a383b73b5b175ce9c9efc1effab0fe1185c14f30456d0609cae85351f8a6ed594a1f28d2f4ca5966c841d308cf414e32d49ee9e4548fe3b6dcfeb752aa8d900d4979641ea80d1506bd44b0cba6b4f6f73c9a3c23542c457419eef6a7e2d57fbd338efc49725f12ae3cee65755c8064da0bc41774cc24d0e7c5422c10dfaf2024c6ebecd7d3592ddd30fca8f9c298e71a6a77990e3e1fdeb970fd440e8c5cf8e2074203c9080aac7834fd612323d7b03be21af3846a8a26be5bf7672884e55f47feec4df1eea077696d7d1db8160d550bf28a30ef263930c316a21b41231132bc11b26519f57366d09124fa0880afdc29079a8ea4fd93c17bb402edb084b181ba3bb7d5a45bcc6e141216a44f6c7e065d5cb4ddf2a6fd166f00c1ba1a09d96947f16a2cf86b6d5f2ceeafbb0bf7c713c1d55b96cb5a697cef9cbc0780e290f10203917930e7b804de3c3cb43b3f5818dff37e163599a574af8a5eb06d9923c27f619eeb86dcbfe19ffd1e3c877a68c67dc132595e4c1c920741680cc163bc0d4ea8c6f731f537a5478e9938aa8499595bd2acdae9ab229d8116c65759c1e3419497fc71309dc48fba98ac712db8aa475b2cf2447eae487d3345acc89906450a5c60203705c7c62e9e7a884d7be8fa8130093203b2d2fddae9cd8727dcec9c2ae00379a6248fd934c11fafe973dadeabe79cd2ee59c2f22978dfe0d29c64bd91b9d62ae93b088c8ac8ff354bf6cbf28eaeb559ca6f474884bac1e93c491cd8dee817d9ba84349ea554bb793897a003e3ea78b690af0cce24ab20bbb6ede040d04b95dfb10a08959732b5bc0e402285bfff7986d9b4e8d386834c9614c4d79edd6845dc869052a592b0d1f1e4928ad16f4efcf1a8479baae96ab45f5fd148dddc364cf1a31a948e1db8906bfee7e2861073a20963a908893399a611dc41e4be0a6adcf3310ec394b139b140c05cadaecc7327cb5d2745dcb7dfa7865b485dcb81f7426d68fcc190367cc53dc3d6e9957341dd66982667449e45607c237a88fc02edadc6b22413866274b0f282adf0919530d1befbd54d89ecb7aabcd8161e3b0dec36075ebd78b07c2ae4edee2b8cf5c6c971e5eb2d0b75c8743819516c924e857be3c3af5475c48bbed98a768e7af5aedf676995e6a2870c1216356298f6d088546e85fbebf61a24895c6375cb19f68649853468213e41b6d7d73be9d11a35db59416c8484833be0885dc89d200a0ad2d0571296e105db9c94092b54c96b8628e41665bf71b9a4ae43d60abd0b573eca1f134d36010404b513063255b299114fac3fe13bb84d02d8ec1cf38f07a6027d8a9987469321037f1f4434355770867191146feb403389f44f9c60aaf308b541150dcc6dcd2cac0fe10e3fb2f23f1cd8342e4c0a81024e3dc45d4c398ce1e4d97cddcada23064d15f3edb9de0917528d4f5f4978617680a8232c27f95188b8a2532b22cc44dd7f208805280698e489e42990c370d4708e15d40cd8fa001b2da4e09afdc8fdf87058e261e0d6f465116bc6e802473172d22e4952953fb892d57614fed262808444a17dfe4204f9e1ec60a0ce0de38b8ddbd48f39959527cae08d453ecc0d9eb5a967b5ffb3f7ce08f054cefadbf19bb4c9ba6e8984fa204e50f8d4426ed8f264a63ae9c583bdfa9f18058c5c45381cc5cf936b87d0ea96a6e31b83f90085ce60b3bb47ae3cdf6b890ca97f80c358eb39ed6ea09a626e28d490d24dcffc8f5d64a51260405ceb0eafa963c2b8a07549b408a9509b6b97b0e76f4db4e50d2dbc8dae56866b00e8ba759d517c13321b362741b10575ba0b20b21fd5c039fc25833b8b45f370bc3133238fd1c1aac6c96fe6f61b4d9371b239cc7722df792122d71623434a863e7bfde09dcbed2f230dd28ce147cd6952d3217f6f61e9914bcfb52918c741e82720f95c89c0467993080c58f19786cdb7999b7e33df01c1fa6e3c90b9b3db5250841a951bf880a448a5db8afddcee2b5e4492cbaa28469a5b09276407e9ff4c0768b330de88c23946b91ae072399bd8033caf13f1ca0195dcf5a8910f7f3144d99ef76323625ef3dc9d5d705b0ba1c2da8a9e8be6d71f6aea20477e7736ca16a448ba95caea2272ca24140e7caec8a2985d5783286a51dafd52e7ddd502547de0d627c183e00f0ad71fbc0cf1d510a4eb35d4a3b5d8f0b7b4fe0169fc48c94e79a2b667f6a6c22b544cfbd227e37261bca438634dd559e0fb931b56da9acad722ec2683367ba8a79ee7e27fa8a30c4a1ffa89f295c315318805f59296edd29a4c1675daf56b887c7cf537fa47ef8252b5bb1b54c667d858faadbd0a55bb976ba40177de4a4e1212d98f53c5f75628919c9f3f3ca8276c3588c5635dcf9b77976ca349a5b3db174ed399959686f800e6670e7b1823725f9eb6b767e818f3cff88b1d9dfca954ded5ac72771965701f907a53c01c619d31d8a7a69ab208c0b09708ef9282b04f34330e17380c915f54c124f08b3ef9c7c94a3f4cfb8d9145b960ea7b970e73f2d836ce45a1cb1580cc86ab3770d4d3cdbbf32d92154f8c1b85a67c0fb8dd378987ed7d66ef2a6452fadad75c372daaecd501599d0080bd5c8752a93994408f9ad99720d2b33d395a2d1d3fe7326687f3c7800a13cbf0b26fea89e352db858ddfa2e75f66917cfc9b6b5151a0395a2aa2fefa454eaffee2178e8225a8c8cab3c891ddad1e4f681fa4d1ee7a6b11d189d0c32ed74b610823b7ea62ae9bd1fff7f0f28edd271d10e83f79d66243ee3093226efae486b4cab7de8f37f8fb0ec8572680558d375d4faba8e8a4f4a29a5d7e198cacd1db931cbe638aa1a091a25c2fe6d3c6fd402de36168d1e2ff4dc5827ee793272163d4044bce0004067cf26530d6cedc776c8fdf980d3585660e2b41144dcb3dea6dd75e45277824d52aced09158a5fc7c64cb81901cb877ec7919221eb847a9e579dfefbcbcd5982fec5300bcd55dfd39001da06ee5f200a164298059e8522eccfc9a2a602459038450602b0cabaf5694cd19ddbb6fa0366890026fffc139387f7b5ee5bc17bf45d06efbd76656239a466353dcd6500ce96e0c28a17a516ae9050e2bb4d971fcbfb82e83030007569bfc47db35fd06995d79fa14f7422fc998db49c1f3e6d93cd21826a55726b772d8229c81c7c25742b59e344976322e89f6065d4431bd0170dc6816fcd3719835f9e6395dd20a723dcd4d98af2aae66067106e17cad7df2838e185013e84c2e6467ced2c738493d7e1d958a73a2997afab742912fa39c03329490e212365fb3fd4d0b60230000000000000001cee0000751f5de0a1f57067d1c02874aefe4b4a0d054e0d6ee9f649b37e2c5067df89ed3ce70cee17fa4f0e3ede7c4ebbbf01ace1b8f53337a867c7e174c31aafc54e57b1822de3f9582f9c8932a2e1470e83bed11e2d028c55e987c1f34648b7140d09f1b205632a08e22d97583643d2c5671f183ead749b0b9da9b90ec7fb2b3e937395a55212b0d3bd96cd959a68a04e19e854cac2992d551e0b1057fa4eb67fd227b3023c80fa423f5566629efda1ae10810bc509affb31922e3569978a028f4e11a45ef21bb688b8c0df9c4836e0578812db7245d41f35c6df29949111fb611c7f7916f7db0760c2cd7481be287db0df80e6f9481f5e51d4f94b6eb30fce60a678be4789dbc4abc7304e31d96462ea31f8978bcb985c5c3e0dd172118d456a31b04edb86ccad2d379e3782b73665d9e5f24bbe904e20201c2548f2f2c1ca4e3482a0178ed266457f2a1f46690c0b6990af59c9498ed100bc709a25bef70eb7209f3380fa0ac1d018b7da5351ecf063879d7e08908e5a03cc843849aacb32658ce384ea7ccef37d7159b2a7de0508d03107e58d74564bf3ee3f6c66e9ee11e2d0cebc6db4da019b659431f1b2bec58a8edb73e35604525f308574c11e683ef9f565a3577c09febcd942d0deeee6a13ce534d0b17d4c935530f0c5e94ceea656f07fe9744bc26621a3421b566e1e23c9226de74bae005a2c46d2f08217d2a12f4aa99d4d631d7ccaa5645939b681c8ab455dfb70e697504afa58a5a1c86d9909f652d3955d1579aa1dcea1ba518aab80f7f8d9a88871b68199a8f1c1a509489a311dd0331983c964512b3ae28b63b68b3660a5ac15305471d749dc6a99906339ab87945a217e1efffe3a8bcd163ba24eb01b73dd59a550a23f5a8f850da2a16658828a685fe7455b1ef8f600b98bc165e8126505e7e366cf7000d14eb32689f29ca2fe6280830509515026d7cc83f7dbb1a0f98144efff49a20000c7697ed1b1ded296bad8e7708ee0db9360e9abb9e464d5e62413df030d078ae8cfbc3e1d104a08923e0146390e4571e66fa38a0f3b3753105874ac7b8f433f51aae390a411482bb5671fb7e334eb41d55ef9884664db6bd0ee9b866a063168c99b6192d41dcd5dd8788f51d52a5ea73c7372457d85eb30aab35ffb8a674cc3399a608505efc290aa46147888296147c83f53eead81ec853ee4c91a81dc6a73f546a141efa922a76e8cadfec4857a892a8533904b5fb52968b70ec9d2646844fc6c7744689c0af13231c97613c415fd83d306041ead4f23d2a8982a675f47d4bd36d35265ac693c240c9b0a888c937984e21642513e93caac543234755bc5970eb7b5b2c1ce924f2e382f5144eb0571c186437fd87e920266e7cb39b26f46b8e0c16cd2cae2b0c36beb5700d5ec62b7d81e8ee49458c713e5deb9160915ac1adaad8f0abc1790a32ad8251c93fba56cc663e0443f9b229ce9d46c9e1709fc434a41ea98c5b06dc69ab8118c4d3826c626b275d86e855b60567a20f24d5407b79c911e3ac671ff394778037b76bd795be5cfadc380a874b653ff1a312f7243108e212ec83fe9625832615221956dd53fc7d6da5abe17280f750c8eca03810a0ab7d14ebff4413b69cf8188ab7cb46bec22d49ea6fc319c71d7b96c374ac1bba3a475c1285644e248e259d8036a4e72ddd18497079f7197c3edeeb7b134c01256122fb1908d78fa43a50855862d61ba6f33be6997e2abb949de0a8f3e653db22e0422923f587eb2de9d95a93bd3467479f8d6edaa4cf7a4917b190df81162fe08088efb840d9bbd23a6b937c726b9bd11470b8e5188c7d55cbed3489e6c2337f4b97af67efe40de04ba56bd34d671b6b58aec775a3088077951ab3536f9ea47d3ac517f40a4f32e596f5971b32e7e1268a73d5d37a418ba9ec76a74ace251f982bf76b3675e8f8c6ccc51d472f24d1116f4ea073beefb1fb33ac310bd7811f461ef7807a91c5948ae39d91a45be7b26b82e2963e49836d4d3a65cda8c8b4eea5b723770cb6c8732b8fbaacb5d157f9ff033eff4d47981b3bcabb83d1cde259f6e07615cbcf139e006d147946e5df54d03419621c86c1d1e398b4201afc1bd0c65dca626bb667a6462f81240f998b3ee2b21e0130c50da16b6474f40b6576291e951b2117e110d0ba8ae02fb24981de51bf5191a199d6421d4c24bcd0ebe7f9cad9af3b72f218a8efb6a56b101a3ea829504644c3b6b0910b039fe783b08247b024d524c201037fe8bc20e0c29efd3dd0fb482bd69f6288320d7a95b2f4f5f4387fd0615d5f1a07817644c1519a9b2c3aa8040c4588395c2bae0252e572ed195f16953b49c90fede311f4b99cbb017293fe74714053dc721a4bdde371d4b1591edd94614c82cf399f7386ba9565f9e186c2b2c9671973c2d0e59df31fd34f67d38194a0932e23d8e9e070ece17dd520e568359c714a9f338fd1bf877b7dabd80f91869fd5d59ccfda235a52f1f32900c50d582a050217e0cbb90f1066dc03e931676e992894c9bf9d96310588c1b3249aef4ebff9d985de7daed9c317467b290bf792ba853d2b6eba2e84c0e994b3c249e1c0bfa3deae700cd40a24ee6a32d95c09a0b35f7d128f49260461ea696772c2b5c7cc079536f232fb66113efda49f4939558ec8ab8d1c8f2363a28bdd4ebce5dd6fd92bedad1a79b5b02a9b524394449e3366aae367b2387baf5c7f15d2b0478c3ef2cea9594045f07da30988306f06b51b2cc95933bb7340c69e8cef96f1b1fd539e8b4b5af8368e254c76acdb967de56bf042d64fc69b60046d7bd11a4ca47f8b470efa2286bc4b840511ce3dfa1aa2c8ccf9312739fd4685b8ba10997c15fc0b6b6ef5cdc2ce596ac4533adfeb2fe4debd02701d49e8c88cf9cf608f764bbebcac9e98d652f7f2c6a2166a304a8bd947353784a668ff5d5c61773280b31d204927b7b861828c8cc7a57911b1d659d67147725c1be28a8797606133d58ae91176e0986da04eaa7be12251c6318abd98d9b3bfc055395722c099fbe6456d013a7afc6e3e0dc7ff004ae0acbfe3f985ce44e1b4d2a83a272aa6428753d5a9f7c75a0c8be62078bd6ff88069cfbeb80cac96af403d31fbaf2bf72bb5000f3d23ae0ca254a72d9cfcea75f38fdbcd9610951a4d17b778701984c55797a2d9c0a33c2de145517426b7059cd41bab574fb75ceeadbcc2fa1a52050639b40e771fef2b2728e4afc27553644d4ceaeca0a6c2f7f7ba466634ae671f6908a63ee52f7c178c93616ff76aa04e0057bb989e33af493c0927abadccd14e0f5f75b5bc0c51537625b87d59b7a71620e9147e3474662959c26397b52419414572eff4adc8b9cc0f0ed2b973e54cd9854777ecb291e2f7e2f42a5dfc6674a098b126897217616496cc7a3630fba8206243865cf204688a25c8dcdf4433e591493fbd348adc10097a36a593466627d9498f86afaa694d072842be23a0a5f2ab85bf3cff955aac08fd260d1355518551307078d44115982ee78c882364c5457e97f37feb5a5b35f62aaa8938bf2d6a083ea3e9462519d7efde091eddb2b32f538aeb1a7d6190757384a0463e9d2d344185e69693fbbf8ef45bcaf1e8c1ede3a37b4e26e36f0ecf9bdf1636819e13580b39178f34f4af6fa605431724345478a4c021909c02fa2b567910bf047497c319a945c8a05ee47cf23946b1ce7305f398535cded4d915b7b217133c61b1f23a407e93e135296e9506ce56fb04fed53624b51db5e352eb6d509e0600ed7bf425588e28cb844a638d24a22428067e1026ec11db612d931dd5705b03b81b82acdf3952a08cd5e224ba5998af604fd467fc3f3b9ebca17fad785c396db6a9990dd863b7d1a5ca4dd4666d56fb02cd318d6723e697959671ff11af9035475d4c9f04db6e3de1daecea268f5290b650cc6726946cafb8f0ca11b50785091b8f87f12b64cc8d690ec806f216074c7403a67226a390998fcce839a597f3fda3ee02b2d9da39488b4c12efa8ffa2dca1a0a52c0481ca947a04e5c32d00e84d270386e1bd6272c53462519775abb92369fd4009c783030007a1ef6b40d8c489e7e65fe956cb555097e455011cfa839ab3b3f455ec6a3cf90277856700c002dedde94278667cff9a241df91b581cf3bd6dd9318de81566a114b7101a9f201d6757206106e736e4b1cc5c5b5c530c24e9be88f3c102dd35b79e994473f8b29a1967aecbd55aafe39e23d9eeb22ceed4ed543a1a660e18818d4dfd4d0b60230000000000000001c49601466e87efabf979d1cf6f4beab0f5d24fbb3d3d3adae2697490f668a943517757687960c685a448bdec5ae26e669ca8565269e0b954c0a4eb50f80baeb118b5ce21328e909c984edc637f7d62e20f0d27d5eee73a78ed82f95b2ddc37d85dbd7814c5d0366340a4d99456a6125fdfde5f85abbd7e0ec1f85826491d168d16adfedad2551abe8ab5667bcac3b183fb9999eaeb292de3a9b763d5bf3d4a07c00948849940b0ae43a5b8777d69d34582514ce655013e747bc85889583d8c0d2c261c03f4dadf0272382e06379155c4898e533d6ccbf26fce8dccb80a688f8f4623372eb397f50fba231d7eb5c3c3d40b30f49ed576d9986685f8794802390f14554db9af2f303df312536c27bbcbb72ba75160c49b5b93a871880992f76c6f02753d963d2cb8d3a06e65b8e75cbc6d499384f815c1347a4119ba479c6a7e8239890b89cd73558c4d73a284f2c00418b14bf5ed666874120aff8f7633676eef775f182725522c5c1750800549428c93cef49524234cac19144e9c3a9a8a71ff0335a83f1a59c850fb4606e141ee828a7b48031e60696b0fd94cd8bc2300f4db64d616f23fee17dc172448b7658d748fb63bde8b29aee083cd2132f29c5a36d8a0a2b68c1118cce64930f6be214e50d17093ec7b8533be99502db6ba7843078cc09992ba80a8f35e7e362dea0f521a98615948e6034e92bd70d859f58e2839725aac08ec2701b0b668893e42fd0140e0ec95e442c7b78ea3b3b45574b14d71fb12c0cd8860fff6d93bd469410b66750f30625fda57b5e5f821ddd3b9c015103488a3a0f742e107b1011e88112ed2794d7f3cab3a8be7cd495aa6dc9d68aeb954778dd165438d881aaf41687b7e836ec561316e0e9c2e427e4f7d2adfe52cd1875b103c064b888e7e3747e4abde5313616ed5edbf9ad8ab0f524758fc1b4b8f8f73c994db943ab8ec2d0c5529b0a7fd05273fa7e48052d5278103d51320ecef1d599b6aa497bebfd2a843f1995be60ade35529bd0c2c7fc3615e8059d2fa08c6dc0e214e1d356d02816d365511ef724db6189e19289e0b67f05574a1a19e095881603b684a7655c31bc6857f0145e47205affd811f30060d663ddb750ccccca804b2485a764a3c0cd668ed75e9068b698c7fb827722fd1b5e1f299b45cbc2c66beacc16d853db40f9ff2824e13ef3f118ee90ea47c90b26795628d394a3f32ef7175d8b7c60fffc41baeec2d6e51509317b9df097db8adc29a0c40ad29ad823e0c9800c3fd7f7fba6023f01dcc074f65bc85d69e5e9441aca18123779bfd1d9dc5c616ed4bf6b19fe81c56e0ae81a6411dd1c1a924d5a2e740778878d555b94ccfb7a43dc670f1eb258ec493f50804e2cf0a3215a8e91996039f721937b9e6d4f5778b270feb65f611ac45353f158b2cfdd569b683b160a50a1d071cadbad7d78084a7267412d6c4cf115d31691b4ed3835b6a2b07dc7516bacc0a5c31f2e05785c563d4a0ca4f28c0b89361985993e2f9430beb14e9f72e602d430d73433ad881b4fabf13fd939b45cb523f7f630a585cb67b6f92ba0a6763870fe3c3eabc6b61daf1686974eb182bc79bf9ed9c2513a135da8e5b32ef1f9b3b7d430f41eed1a8a9442b88fd7290c098fb346997ebdd002df4640e9c9cd655e293041f38aea9a031a1282cb87e49ca6f2ba4838af43b54879ad22a27d72d1a3c7fc94f9f1ba84244c48aa131d9e8529a52df672125e77c78ab8457bb1b88137303fd2a5fca84372eabe072a8a1baf8b84997382e5fa156a4df37b2cb01961ef3a52745412e378e2d954aee3a094dc497926918fca99764feef0a631b472d3a0e38630ed2b4ef23066d63cc9c1f7049c7f31c8ccdff25a0cd5afeee0a47df70c490c66ef0d90ec5414a060d879f21812c69116fcc8512bc692bd43898151a0dbd7a10fd549c696939a7e4d443f07be5289c44cd717d7a1c32b16a7fcd1a33a42202014ad7d6d0f5859a067fd0b7ebd3e030a20132e73b83fbb6fb98ecb2f932381b8379e887e1ecdaec2a561ea82617a9fb57d48bf1d4caed69a138af7bfb4d2ec3c5b7f9aad6cdedeb195873c9f2054172dec4f5188cbae7cbaa0266add085525c489d2f19e58213dc7101de2751db59c4db5589856d0e315023704b61661c4c3e62f8001ee1cbf2905997dc4d06abe49186ff84baefa7d9d71c0cf1e65f77d8ed2c8b6dac65b0795851cf1aa704e43e151e91159442279e8529249a5eafb6336524b12096040206c5b799036ab50cd4c01c4492ab6238c3feffb912506bf277e83962600af867761bf4b7e5e0018f32bd4e32c17c7cf2ec0a7630c9e0f589798cae5a886564261ae8d993420f6693db4088dab25eb34fc5efd4f5923f5c62ce57a0f0dd992b19acb39811e06cf3c2a5e72e7a9c65feab0a4574ad427c821f1f3125f36ba307126754b78b10a50b6f1614ecaf3f15953133bbe5b8992c08a60a6b994635ff0caf02cece81c8c3b3ac6dbfdde7185cf5b2efe21653d1e2ac83302ffd76c279f84de41a769eb7140e46c2941bf874cb7f4ab41292f18f166f58a308b56ca616d9e0d144e5d8aed300adc048ed76e2dbc8b2cc30691c640e599f128b9eff856252dc6fea8ad16e1c7a99dba7259dd593f630a6dc95fac6d3514f4fe0bbd5d21fc67d3829312cc9a4c81e7d6c88a9a6106f979c6b23e6cbe5402f154e14b3bcfe22ed6a660b31049b1693a530236fdb7d957e95c01ca3f6d7e4c9ffa5a599fd6fbe0e594985ad58e24267c29f9c951fdebc6c14b1a94e43ec9656a260fc125962b0fcc3511ffa860ba467bbf034ed22540ae5133bc8348070fcd62275130632caebcebeddf37c26c019fdefa61a75df680fa01bc36af67e929cdce0dbe6279523feac74d2558155c98a66aba7c3dc142eee83e0f55ac574be9368e80691788ade1c7fc9bc81a4618d18922086675d23330b17661646c4d196b423525816ccdb9e89db682705df5a31c2f6401df3444a8c621de23e686eae2566041beafdd9c481fc5f363d1d67a5687523451470088202284893ce68bfe15c757443ee1195f5cad610f82f146fd46cbdb161760362a2d0fdc21319e3925fe55765ee733640cb6c068c92039437c67ae97ce0aa91934a41c64e3aedb6090f46b19b07adf0d45f41e233fb49a509d86b731c6638d3f93ca25e01ad8cf8348718f6b7b4cedf62931127af7e9d92664df0825570651af6fc7e64932c0e206b7da75520f0542b95e8770766bfb523c3609178941c1603cf0695d668ee964178c7fd24f93feee9500e8ba93bbbd42e2b986609bed9ed9ad2a43468bd40c101e2237bbf932448b3bfa6995c13359d22075c9a9494af4b0299b13081cf39f8f02fcb6c934c8cf0959bc78eeb9fcb08d6eb04c3817954b9d6e3856ccd5d644719cfbc0d9a8f1de808d980e7c020333be9c643378c8ae68e96717a04b8d6324137ee3470811cb060890b9d5e0a30c8d5d7d45694915df0c68bb848d10a0656be6af5a24c2ed351b4b10249d1450ee2eecd0df4617fa67685f2cbec2f46827f791de5b095d1d86cfdfc25ea2616422497cda60cf1ce164ccfafa83c56b6e55142bfdb13cbe8c9d7f0c0a8723b3c3fa88b366c287413dc09d50fa0fb2bd4aab102b95b2ab9a85c3d7d94aad5de8a298f7f0ad82ed0dddb7f45b7c037f95ad2263b2fd99f9467620f46ea9011fe71b2a793629d67d14d7c41b1a0c5570ee9d6b3e5ac813986de2cb10e59ecd49483d7a7ffa1525d09e9d5e3bfe1e311f495358c7809f119148ce65a03ae98cd8b14aa74c4143ed4cfce024d4e3027bfab91061b241630004e0b90368a9142a597caabd4e3da7b0caace7f85e26399919ce076cbfb0e64e62fc5b54c60f4245243a407d2c97cbc13e464569e03cff8ae36c9ed2e94b47d7e9c91df88274180d331cea6b83390d0bc599e99973b34e28b0bec9caf96e0187b8c48d3f3077e9232145f3c9fcf23cd5be42d7185d6e520e19c0ad450b99c9b76192e884e0101c221534e00929dbea3fdb460c62fe66e4dd678159fe993c6a5c1da53b2660e896d888e83dea3fab83030007c275e0116dfb6df0066897e513b4b5af69ed924497bde52ff8be22febc3c4b731b8c097c7c1cb6e7102f465813bcdc2bb5493a9e8cf82d07fb44400cc533af521076582551a4cd8112e104a9a63be5eaa1b79a5918f3534126b8ab09c76eab2b31d4bd9882bc237d54c4f24e8c97e0569e686dafbce914b0fca79a4f0de8ca1afd4d0b6023000000000000000120a401d525867beb6c5f26dacbc058686da8c56580580e03033534ebcba64234e0ef5d78a252d37c22687ea2609a1067e43b1918bd3e69005ba544eb75cb7d0b5e7ce78abf8ec8a00373ecf1be7432a9e6a52e48b34efcd7d0a0bcded416168fbfb95889a45a6aace93c726a5403b8acb0f07a8e6e277d0c0e52e66e500851f1d141dd792e299c0ddfe48abdc58a7bae0a481a1e58b13e095fc9ad0c223df2b68102885399221abf42de33878eb291a26b6352bfa7e3fbcfa02e8f9e459e98436deab7bf2c782db50377657d1331b149796587288533866a0298f1b9bb5b2729d17b90d0a0eed7f7e19dae40aaea6dac2092022145117db3d5850167e34d1f7e27c88d32a5b0a53a2d3817c709d9bd30fae5a277b8d1f2f81ff0013fa5233dacf6160af048347decb8891b142df02158a385aa95bfb8b8919f59e725409d13ee09546f1a7c3242b3c42404ecdee2fc67b56dc82f76c3535d3fb88ba336344b670e2cbae1c9c76920a099a4a469286b3ccb5eb72f1eb1d3924c12e83b1676a110a6ef5e7184b09ead82d8a75be938f1be421e61061645db6143cf83e34f206321c67851b5101bc2d22adea8da5d99507f6ce1a42f54cf1543ffe4bb90e44e0ab70162dbff482abb63ef413b98ab39540ce519e986d75a2c8ddefaa708a3d71454e6fcdbe07846b20e6c879a0074c53c8483a03c7a375d035665732c63a4e7b9826bd07caee3d4be68225a6e2fa315ad4492e30b45be3539fdf89c5e3c579854a396fdabb1500531210b3666af81404bbadc76638f1adce1507950120f782ec69c02daab69dbe65d192ed4f57983786c2feaa456712944b8cc1bbd8ea2350f385d12d60bdb368c6658c4cc204a85ebd8b6ff2155efa055913498b01686765dce2c9418d87c653838d92d5674d96436b47fcad9cedb8b346aec4bde3b22997ef9c7ae7f84f98c76024af5f333b380559a95b6b00ec9281ee345399f4cf691c629e089f8260ef67279a6e4e648fb8dcf5d821c1743ce7ca2ea3d50328c4520f57657b0ef3af05ce1b6f9001961cfde93f5d4316bbe5b7bc5baf5dd7c0a96fadad2ddb27f8673dd9d92d189c4d211d0c304bf5eef0fbffc7381b254d522a5cc98c611c7ea3fc7733d750c7522d2ee95b94b92b7d899186e81c897074a131281b2afe6136a022a34dfebbf982665539d71ec4ed033ad38d077c4646b01eb4cfa7c32228d181e634898bfe5af34594cf4bd1b772dde9ea0247d2a69b4afe35ab8d27f9df8ab4f32c0eb33305484605bf5860763301eeb30acccafb8f6c2b0e57186c945c1c42bc2f908283e863786cd7f11fe06d1f67add1adadabf86c422a721edda45384cc29634e2937e7c454f1374094cf7731f42509dacc5e599e6640d111629088e9cb618ced96befdbac4c708bdc84e401b54064b2d5f02aac964962909b0a44cdfdc1964f4457534cf6d9712bb4a2f14b175dae717ef02ab7b185c5a14eb2a28ddddfbe52d640fc3ad3c7a723d92c14c0a6b8d25203bb4a14bf775db7d36f45f6c0fee200b9239354f188aef97dbd9d16ff97a1a5eaf136ee6e1b9eb1806e57a50aa14ac7895644b29a781961abf3f1f80a2f982d4f63e86ee848ea1fc97075af4a849199199a436142f835d8dc4a4741a3bb33f55d9fadabf2087b35a9349ff66dcf719141eef8b037452980e445f13bda04ec1a86d68884d9774e2ca8e1f3ef58b726620509cfecfd9d967d026b7ba26d4163567a0e711b43f843cdedb9ea180f6b34ed4503196c5115a345ad2594f5a81babac028ab717fbc0f7d14e30735b6b15b1f23a8cf71f6fbdfbf8030408c683ff7a828cd4c88a5b25aa68fc6cc8c9a327c18e260c91e35515cc7e0cfcd5e729dd8396b06ecedafb9fac120ac1e61c23a4568dd5931e57478736989b10c0f00fe0929811d1d10281a355fe5c0294880424253c53890126b17606d6d51d3949f6248a87873346b13a33d1f40bca0a0aa9edbcfa54c7f7fa662ad8db73d8a4833a195f545e1d59ef1bc61411272722309e8677d9faaa04ba5d8a1bd0c57cdee05cf99d017dfa01ce6389133425869f487c0fa3d77fd8daaa356f9431186d2e14bf76db73f5200edfe9e24023fbda00f72315f67e5ade6348d1e36bdda83c91e80392752a27bb77e1a48d5c094ba85a6e7582ef96a38d6c39ebd19d1121e7b26a4eb5ba984f67974b8c1212516ce021d13554687398e5d3b012798460fb663eec0dc9905582bb7cc8f23c1c8ee402daa3a18cde615901b3b03e068aac16a464527d73264a0d46ef47f02ddc22f60de0e04d88fa0bf761be9efee30cf711c9b35e7512d09dfb49808840a33ab2a3ec3a0d8f96434e677ee3ac4c205845cebabe96866776419b2f0ef573cd4704ab22261b5adaaeabdd9b6e32c98d9902072d73519dcabf1ca0be840faf470aa016259400d74e4a9a5ea692fbb50e73490dd0ef16293b93388d606d718080abd2c8fb1ce50fb0dbe448d0485d1e13297458bc7cba0ca49fd251cc6917d8c897b6308ffdf89545f50f92b5be55e52fc39e226e6a182b410843648f97aee31590465ec16f4f66e816b434073344fc8fd297603ee5f642247d61eac08bb2a3b7e4c32006e549419b7344e23a8ed89164340640a607a352f6a4139fda9e33d02a66006813822c3c2a5edabc588628da14867f6990f4efdc3421ea9710988a9d66b2abbb69d28b194032338f717e1503fb2607dd7e43080e089938767c8f83a919d0fb1b8b8f7e2a2a659f3a81ce6e513f3618871b2e3a81f0e1f03b55902ca832ba9f3d24163675f4d565b0687d05c9e5fca7e344056d0f4104a0ddd38e8b91968c649efa84c09172ae8c77ca93e47c3090d9f3496e70be7197231ed5a173fa6ecb4ac2c4924d248cb803709759a776413b90888604526d47fbbdfdfd3a4defc75c5a8be39d8aa93ea331506235c9c80f11ef7047e0bbc9db8ca9b42399159f2023c3172bcf299faba0e27de6f77fc02cee8666ed6a223affb6c2b258bac486ba905eb4b588aca81f86ee0d294f0ac8c1fb5616ceb6e2783ed4d1a227ebc1edd376eccfaa5f76625e21ee934765415920505980847f55f5005bc8a8785c1aebdc219c92e2fcc6f16eb91481a1ab309881a56a900ffef1e60ee920ad4625ff37ad0fd5d19e4ebeabdf1d818a822bf45e44b8c86421c744c3f81699c3cc3d2525d86a9529fe47b70fe3fce31a53d66376319ba0e7e831d72b690d54198a98f5c5a97e3cf1f24ea4cfd9f28ff95d68ced12b83687616ac32be4a28ad208a7593dfd998e60d3215f08bab948605a2c13f2c4a38a4003bc17bfe08c6362e4c75e318a5224800f28f0f29bc856cb285ad2d46913f010f75f11eacd48b156be13045956a4aba4092315e66cd96d043e3c0035aeaf90062f9a858b07b5e0e9b275719d09efc41d4525bfa044ad30b8d62dbcd32d854a3dbe9f44d3523abd7054bec8049451025965fd57bd9e3c77bdcf0232d5554ff292b00fd08a70918df64125d420e5effc386c10d0533178c2600e7961c2c0cdafbd07542fdc108e7d46517f5de369f9720da520d1e8575e3abf2c1e42fb6194e49f2b4e15f5d6baf5caf361872cc6b96bf177bf311102de5fec0489090cff33a695091372f876a37d82c2e9a587e8b38064befb9df8446f01c21fa4bcd790bdbb76c62bd6b98e5c4ec1c9e8869d44475b21b9581d58b59419d478e8d0f65e7f50cc9897f83060ca732fa79de10a824fe2c7e4a3956bc21b8e883a715062249aef8a4439dad836ad9f102a0a889ede348bfb3a8e2d19d4be917041b21b9713fa8be8cf3093fd3b173d9c1b24c12b68778ebb47495f5afb19db461fe15c48f61ac308680314262b5b587204a1e5e535e7253d08635d2c4314467b13bf21c927f257e406cff54d84ba1a91988d20f28a2a443a9d9ad1b8b001cd734b62a313f27ef34115ad0a0bcb362eb248b23ad61784b70e29d4cc8eb0a6a6f5f308ca684af6d672b491a6c5419befa9431190c70ec4670dac5f7778c8aa960666bcfe1eb504fe591ea6804e21ebae7c1abb996c507c0dc7e5b6ec4b2a88303000718ea525dd30c990d2b1e09a9cc51ead130131c9bf615072d5a86ce3b4ebdae6543fbe4640e9bbb32e06aeff974ed05b9b35ae8affa8c1357427ba78db69d129834e63a1616db8163e4bf75ffa1f23d329d836e114455131eef3671006049d8a28c4e38e36b5cd1538f586096a613f2cd1356a1233a6330e3756192f4a6b39fc6fd4d0b60230000000000000001d35c0090c4cb75327d8b8f8adf9752ca26d1dc7d7d92e3ddc87078dbea10b7bcbfd62dcf81b4d881e51bedce6d6701c85a726ad7f46283eac85d236f8d7df34bb59c1b41cacc79c411ad8cb1dcaa2078c2aef06a0c59bac03b07265e4f787858b2640e9bb1cf40f3f26198b595fad9c4fbe091a285caa4921cc50b9cf013767e62df0579acf2fee295e60829912a2a37739004171f1c851870327ebeaf6fa851d80cbc3ee612d4343dcfb10385e097c6a213359dfc22d77170e9f8aec8356e9eb223c742f2e58a8ad537740467a7f15d4142318559d438916dba51c2d42c8663376d5830a5edbd5c57fc6429b0023ab93b21d1e884473fea8c49956d093c40416a8ea8bc26784e672be1f0eedcd38d972209bc0e3790d5be90884ffe656a7fba5b75fc3039dc00eabe939a8b7e5431267ebed713af544c0632b7599765d4721bff005a005a683934de4dc971efa291208e2d5869a6335c2a7cddd1ec6c5cb69b6a00b25c0fb0357afb48c660d3444ac7c0765ebc715ff58d71a3c0c3436abafc5dc5037b69cb62785c7fb2134479fab38987b947e85e2d1371c42297b937e558110cbb975120206b079f8ba880c74fc98b3d82c672b8c23ec3fe04dfb094ccbc553491cc74bd3be0d97f55c87076892dbd586e45133dffaf0a9ccee9d4a2571ec23afeee37ee6fc2e552dce7b555b8cd402840a68469ce416561e7f6241a988821adcdcd80fb13e552edfc9929921980539c6f787ae92f8b6e692e0fc9bd108210b9f2ce36bed700379a360e846f1a679bb2dce1fc35bd1c5684d2f90edb1874b0f0d27f45a18be89ca53376a04f044042a90821dfc6e992b0b5705b88a712c0d1f6f5cffe9c1eba850a3472a6a549457b7bbf91a04b5d684c697a4dfce4aae2fcf50a564238ebe10f25cd360c392c4089326ac6323ccbd75a708942ddc756a1d65d9eb771e0f1d28bdf703bd91a35e8f3dbfa1c436de33b19dbe0fdd60848658e7cff6518a02e56ae894ba256037826949b592f5bdb1e3d847f0e3c5a8e590d3e9ca111e3aa6a5b8500a42f401211b3e95397dbeda686984852cfd2e5c32e32c213940aa5ccb174748fbf8f37a49e0fd4b34c7291db13e6e2bfd5411990f5d839d821865a4dedf2337ef35cffa8fbe1fc9c462427383d3f28f6accecf0bd329eeeac0873cd15540483e3e920d7ac00b984fde444388b282762a38ea6b854fd99e6fff04401bc88591a939f399d297c57a3f22f60cbc77c5e9a7ff33cc3d3fe7bd5206241660978170bb06b75b869f208b4e9c809d84f2f0f8788d1c5648715eabfeec68844ac28ccf5b6eae8a5d13928266468731df3ba17e76757b42bf4c1be811f3fbc941d156e0f079f96ac8f9449dfbbb224c536b064d267c4df8dc51d16c6ae46eeda4b48a0300c287e1e5fea167047bd8713764bc21f04ae647cc2681d871a2b79ce4d4028e0bdbab732fe235367eb7872c35ac75344ca5dc1361c7ec5b9bfd7dfc962c008b96d1cdd3cf641bb6dc7b48c6c083e29f133bead27eb809a492f8e299429800070ca91769b1cded7a769b2e10d24151824982469d5c3667e084edc18ea68ad09913873adfde579f2d7dea9bae299beb04a42e423d95f03e71747520d89bb310209457d826b931c63fc5b0c0247934a9862ab107505c37db16e2945b9313f6512bce062dcc2859132051610b807d401ec72ee0d747f499770248f4221a19f4b4cf6f7b50af43e4383e0cc25133bfa5fee86ecd437177b95669e5fa96819b3bf7dca2b74ce721fcca16d0a9d17b5152b5d922e23bc2ffdaf828248ef3b70917775485ae1a4ad7b71cafdc4633450823ce1baf943bb9725a4bb27e3ecec0aa4378f5fbfee201f356b5045befdc054ae9f25111223233964c58add28c1388880f21a23835b55895a6668fe5bd3baeed32f99134fd453701d049db8fb6d59ede889a514fc896ea537d1c7aea2718fe3cdb15eb23e2d38667501e53d908515e0ebd195c9233985d3733f11ddd385f71ed6d552ee2624746ffb07843fa77ecce3b81e99aeadb0d61272680977f69b1d5da9218b7f85dae7b9782b156300ee13b21d5030644f5ef425bd93db583fadf00fbd37b4333607e536285d65a3a6dd9281a7c88a829d0d1cae940517224142a4e5588a415068abe70be39d528ceabf112208882a18ec34ed89f8e3f854cc9817641b64f9de4e3e291ce59d849aac265f289c9cad833f205911e93fe899fe86fa61e0fb1ce329d4f4fbd2699446298750a212ef00c67d6c4238df9cb76b2db80b9f15d1d9aff70d960154c39da67c0ba02fee14a32d76cbe38e62f2ee43708fffc7a516f04a41084dac4210f903cbc984b508f2f151f7acb6581d20099cdd43d86cabb4a7d93a67c4fe39c9c0e7267f47c508e24c3ef131185fdc55717e7421c6650ca5a2db2326e08abb218f9897b86f24be7d454988279c0696646f1b9241213a1c1bec74b722534e5282a851371f5e9c55a7eab5837bbebbe7b97f94e9b612d8a33271ddd20f4b30125281a2ad344eee5546c969042cf9cb845045fa886f42a1dc0cf8e7de4e405b10cfa4acc9f456984fa2cac391922bb5a1fcf4363f08b8d9b6f60c574bf5bf59cfc7a31fdb529bc69d7dc87afcb8005c59ef718b49afa551cb55197a22c5a7d22adcefabe88bf413adffb3fffd79b526d9de64040c496e628f13b8ae58d9c80e6479b3a6c650b0d2e43e54eab16572e678bc072f2cc23becab9a03bd04b2c98b60629ae23482a2a107f69e632c6d87b7d55a5c38dcefad988af127e7262d80ed96795343d36eb10aebd1897db98b27d4c272f3a474d86484fbcfeb8da7163420949a314e8f17fbcf68a9b1a023b0b0b844719c56f3db9cc6ea2d9703d91f68724c8b14a2eca71b1079a08fd07a1e436046bc8ca893ab9e8c55b2f987b24bd3f43f6186117e3a9fe826950107b015d0211260fe748d05384c568a46460bded61c9451030db7ea093b665947ac76e9873891e0e56d2939d095702a84da51e03578eb6999be618417f4503f8a66212c13a896f4dd64cd469f2a21a10b1fceda43b9f7a1e925034bd90c7833db12c2fdee49b2a16f19763a8fc43b29659ea82a3627da2e5466e49a8807303e1fa6f25b40c9ebb6890a0e9360e07d8311b87a9a69f6fcbb66738c95f02124f72338e24f49c31fbc5f873c582734e14c4f881b11d9a398f78bbcc3524ccc2902cd460b87b78bc61cf1ec1b8c50e043fa109e6fec5961a19f9977f3a73ebe83b20a7a371e38a25b924a2623c7fef0e4674e77f94b569447b11a26d641194bf554ff79f8c50b2b992123f96f5d72ac429c152310ce600023068f128f9f7be961a3fc454cdd73ab88b348a501fd3e79ac2e0e8f99ddb943df0f3869891cc2240c6cf55515859f79a5103a0bdc6bfc3cbde5d0893288a379bd24fe102e4c907e521a7fd9158295b87724988c7dee5dc726e2019387ee3eb84696547de0df13dd8a082615a898be4ec85e7fe594bf3bc54384794d08fd17da1e14ae67346c03402533caee0fa4567313393e83162d039ac53f732c9a2a8701a5e30756e419a5f70951b4a86d4c1dcc002be0540202f291c441e9c90f5eb4f94f82bf188c854c0d2233905af75334737dd014a3f7e7ee4aed8698874e372a297e64a1718d1a136c1c460e951b13fa83a7bcd435ab2e51d324c86cd5f2a234fc678a31ee469f4dda4876703574e2d13f6a74373317258e236018de0dcbdb88c08caa7a6d18b97d26aed8700d61456a92344228a3b66eca99a9b6d9e9e8feb21a0bd9e6cee4305b372c0e8ec6d3f2ecf6a115859b9c48b14063ed49ccfd98ae4808533cea7e0cab64d9ecf8b966925fe015500bafa50217bc4288d20948f0fcc7c80e774414a10de7f7599b928a435ba6d3451d87c4e989262035915a4171c9aff3e355e0c1ae4f5f52a1aab10b37d26bd26e5dbbebd1674e71cdadc4e2e8f4e4efae933f42fbf1b4edb43e2098fad96639f30b186c7fed9ee2617607f5684a8d7634ba814625076e0935d7f6ea2a1cc877fa1d0e3317deba6b10fcdac3f43a75a9ab8d27d2c0000';

const sleep = (msec: number) => new Promise(
  (resolve) => setTimeout(resolve, msec));

function generateTx(index: number, xpub: string) {
  // base xpub
  let authorizationPrivkey = '47ab8b0e5f8ea508808f9e03b804d623a7cb81cbf1f39d3e976eb83f9284ecde';
  const basePath = 'm/44\'/1784\'/1\'/0';
  const asset1 = 'aa00000000000000000000000000000000000000000000000000000000000000';
  const asset2 = 'bb00000000000000000000000000000000000000000000000000000000000000';
  const inputAmount = BigInt(5000000);
  const feeAmount = BigInt(50000);
  const inputAmount2 = inputAmount / BigInt(2);
  const inputAmount3 = inputAmount2 - feeAmount;
  // generate random utxo
  const txid1 = cfdjs.CreateKeyPair({wif: false}).privkey;
  const txid2 = cfdjs.CreateKeyPair({wif: false}).privkey;
  const txid3 = cfdjs.CreateKeyPair({wif: false}).privkey;
  const abfList = [];
  const vbfList = [];
  for (let i=0; i<3; ++i) {
    const abf = cfdjs.CreateKeyPair({wif: false}).privkey;
    const vbf = cfdjs.CreateKeyPair({wif: false}).privkey;
    abfList.push(abf);
    vbfList.push(vbf);
  }
  const valueCommitment = cfdjs.GetCommitment({
    amount: inputAmount,
    asset: asset1,
    assetBlindFactor: abfList[1],
    blindFactor: vbfList[1],
  }).amountCommitment;
  const signUtxoList = [
    {
      txid: txid2,
      vout: 1,
      bip32Path: '',
      amount: 0,
      valueCommitment: valueCommitment,
      descriptor: '',
    },
  ];
  // generate unblind tx
  
  const txData = {
    version: 2,
    locktime: 0,
    txins: [{
      txid: txid1,
      vout: 0,
      sequence: 4294967295,
    },{
      txid: txid2,
      vout: 1,
      sequence: 4294967295,
    },{
      txid: txid3,
      vout: 2,
      sequence: 4294967295,
    }],
    txouts: [{
      address: '',
      amount: inputAmount,
      asset: asset2,
    },{
      address: '',
      amount: inputAmount2,
      asset: asset1,
    },{
      address: '',
      amount: inputAmount2,
      asset: asset1,
    },{
      address: '',
      amount: inputAmount2,
      asset: asset1,
    },{
      address: '',
      amount: inputAmount3,
      asset: asset1,
    }],
    fee: {
      amount: feeAmount,
      asset: asset1,
    },
  };
  const max = txData.txouts.length;
  let count = 0;
  const txoutKeys = []
  while (count < max) {
    const keyPair = cfdjs.CreateKeyPair({wif: false});
    txoutKeys.push(keyPair.privkey);
    const addr = cfdjs.CreateAddress({
      hashType: 'p2wpkh',
      network: 'regtest',
      isElements: true,
      keyData: {
        hex: keyPair.pubkey,
        type: 'pubkey',        
      },
    });
    const ctAddr = cfdjs.GetConfidentialAddress({
      key: keyPair.pubkey,
      unblindedAddress: addr.address,
    });
    txData.txouts[count].address = ctAddr.confidentialAddress;
    count += 1;
  }
  let tx1;
  try {
    tx1 = cfdjs.ElementsCreateRawTransaction(txData);
  } catch (e) {
    console.log(txData);
    throw e;
  }

  // blind tx
  let txHex = '';
  const blindReqData: cfdjs.BlindRawTransactionRequest = {
    tx: tx1.hex,
    txins: [{
      txid: txData.txins[0].txid,
      vout: txData.txins[0].vout,
      amount: inputAmount,
      asset: asset1,
      assetBlindFactor: abfList[0],
      blindFactor: vbfList[0],
    },{
      txid: txData.txins[1].txid,
      vout: txData.txins[1].vout,
      amount: inputAmount,
      asset: asset1,
      assetBlindFactor: abfList[1],
      blindFactor: vbfList[1],
    },{
      txid: txData.txins[2].txid,
      vout: txData.txins[2].vout,
      amount: inputAmount,
      asset: asset2,
      assetBlindFactor: abfList[2],
      blindFactor: vbfList[2],
    }],
  };
  try {
    txHex = cfdjs.BlindRawTransaction(blindReqData).hex;
  } catch (e) {
    console.log(txData);
    throw e;
  }

  // calc auth signature
  // get authorization start ---------------------------------
  // console.log('*** calc authorization start ***');
  // console.log('SerializeLedgerFormat =', authorizationHash);
  const authSig = cfdjs.CalculateEcSignature({
    sighash: cfdjs.SerializeLedgerFormat({
        tx: txHex,
        isAuthorization: true,
      }).sha256,
    privkeyData: {
      privkey: authorizationPrivkey,
      wif: false,
    },
    isGrindR: false,
  });
  const authDerSigData = cfdjs.EncodeSignatureByDer({
    signature: authSig.signature,
    sighashType: 'all'});
  const authDerSig = authDerSigData.signature.substring(
      0, authDerSigData.signature.length - 2);
  // console.log(`*** calc authorization end. [${authDerSig}] ***`);
  // get authorization end ---------------------------------

  // const network = (networkType == NetworkType.LiquidV1) ? 'mainnet' : 'regtest';
  const network = 'regtest';
  const deriveKey = cfdjs.CreateExtkeyFromParentPath({
    extkey: xpub,
    childNumberArray: [index],
    extkeyType: 'extPubkey',
    network,
  });
  const pubkey = cfdjs.GetPubkeyFromExtkey({
    extkey: deriveKey.extkey,
    network,
  });
  signUtxoList[0].descriptor = `wpkh(${pubkey.pubkey})`;
  signUtxoList[0].bip32Path = `${basePath}/${count}`;
  return {
    tx: txHex,
    authSignature: authDerSig,
    signUtxoList: signUtxoList,
  };
}

async function signTest(loopMaxCount: number) {
  const txHex: string = fixTxHex2;
  const loopSleepTime = 0;
  try {
    const basePath = 'm/44\'/1784\'/1\'/0';
    const xpub = await Ledger.getXpubKey({hdWalletPath: basePath});

    let count = 0;
    let failCount = 0;
    const txList = [];
    console.log(`generateTx loop start. count=${loopMaxCount}`);
    while (count < loopMaxCount) {
      txList.push(generateTx(count, xpub));
      count += 1;
    }
    console.log(`generateTx loop end. count=${loopMaxCount}`);

    count = 0;
    console.log(`getSignature loop start. count=${loopMaxCount}, wait=${loopSleepTime}sec`);
    while (count < loopMaxCount) {
      const startTime = Date.now();
      let sigRet = await Ledger.listSignatures({
          proposalTx: txList[count].tx,
          proposalTxSignature: txList[count].authSignature,
          signTargetUtxos: txList[count].signUtxoList,
        });
      const endTime = Date.now();
      console.log(`getSignature(${count}): ${(endTime - startTime)} msec`);
      if (loopSleepTime > 0) {
        await sleep(loopSleepTime * 1000);
      }
      count += 1;
      const isConnect = await Ledger.checkConnection();
      if (!isConnect) {
        console.log(`checkConnection fail.(${failCount})`);
        failCount += 1;
      }
    }
    console.log(`getSignature loop end. count=${count}, wait=${loopSleepTime}sec`);
  } catch (err) {
    console.log(err);
  }
}

// This a very basic example
// Ideally you should not run this code in main thread
// but run it in a dedicated node.js process
async function getLedgerInfo() {
  console.log('getLedgerInfo call.');
  await Ledger.connect();
  return 'connected';
}

// Keep a global reference of the window object, if you don't, the window will
// be closed automatically when the JavaScript object is garbage collected.
let mainWindow: BrowserWindow;

function createWindow() {
  // Create the browser window.
  mainWindow = new BrowserWindow({
     webPreferences: {
      nodeIntegration: true
    }, width: 600, height: 430 });

  // and load the index.html of the app.
  mainWindow.loadURL(url.format({
    pathname: path.join(__dirname, './index.html'),
    protocol: 'file:',
    slashes: true
  }))

  // Open the DevTools.
  mainWindow.webContents.openDevTools()

  // Emitted when the window is closed.
  mainWindow.on("closed", async function() {
    // Dereference the window object, usually you would store windows
    // in an array if your app supports multi windows, this is the time
    // when you should delete the corresponding element.
    // mainWindow = null;
    await Ledger.disconnect();
    console.log('disconnect');
  });

  // ~~~ BASIC LEDGER EXAMPLE ~~~

  ipcMain.on("requestLedgerInfo", async (event) => {
    const result = await getLedgerInfo();
    console.log('ledgerInfo');
    console.log(result);
    mainWindow.webContents.send("ledgerInfo", result);
  });

  ipcMain.on("requestSignTest", async (event, value) => {
    let count = parseInt(value, 10);
    if (count == 0) count = 10;
    await signTest(count);
  });
  
  // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
}

// This method will be called when Electron has finished
// initialization and is ready to create browser windows.
// Some APIs can only be used after this event occurs.
app.on("ready", createWindow);

// Quit when all windows are closed.
app.on("window-all-closed", async function() {
  // On macOS it is common for applications and their menu bar
  // to stay active until the user quits explicitly with Cmd + Q
  if (process.platform !== "darwin") {
    await Ledger.disconnect();
    console.log('disconnect');
    app.quit();
  }
});

app.on("activate", function() {
  // On macOS it's common to re-create a window in the app when the
  // dock icon is clicked and there are no other windows open.
  if (mainWindow === null) {
    createWindow();
  }
});

// In this file you can include the rest of your app's specific main process
// code. You can also put them in separate files and require them here.
